:title: bpython and django
:date: 2010-02-13

.. raw:: html

    There are a few posts out there to get basic support for django inside of bpython but I as far as I have seen they ignore the virtualenv stuff that most of us django users do.<br /><br />virtualenv is a must when doing development on django projects, especially when you have several projects going on the same machine or you want to involve other developers. It allows for a clean environment with known versions of every package that is installed inside of the virtualenv.<br /><br />The first part of this is a known hack or method (take your pick) to make bpython recognize the django project.<br /><br />First you need to modify your ~/.bashrc or ~/.bash_profile (system dependent as to which is used) and add the following line to it:<br /><pre>export PYTHONSTARTUP=~/.pythonrc</pre><br />What this does is it tells python to run '~/.pythonrc' before it does anything else in the interpreter, this is a python specific thing not bpython specific thing.<br /><br />Next you need to create the ~/.pythonrc file and put the following into it:<br /><pre>try:<br />   from django.core.management import setup_environ<br />   import settings<br />   setup_environ(settings)<br />except:<br />   pass</pre><br />Now if we didn't care about virtualenv we'd be completely done. If you go the less strict route and don't use --no-site-packages (the switch means that system wide packages are to be ignored in the virtualenv) then you will need to edit your bpython binary, most commonly located at /usr/bin/bpython or /usr/local/bin/bpython and change the shebang from:<br /><pre>#!/usr/bin/python</pre>(it may be /usr/local/bin/python)<br />to:<br /><pre>#!/usr/bin/env python</pre><br />This makes bpython use the value of the environment variable python instead of using a specific binary, the environment variable gets set by virtualenv so you are good to go after this.<br /><br />If you use --no-site-packages then you will have to install bpython in each virtualenv that you want to use it in.<br /><br />If you have any questions toss them in the comments or find me on freenode as Wraithan.